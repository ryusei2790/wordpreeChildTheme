function runMainScripts(){console.log("自作アニメーション開始");const t=document.querySelector(".header__foot--nav_head"),e=document.querySelector(".header__foot--nav_body"),i=document.querySelector(".header__foot--nav_foot"),s=document.querySelector(".close-btn");console.log(s);let a=0;function o(t){document.querySelectorAll(t).forEach((t=>{const e=t.textContent;t.innerHTML="",e.split("").forEach((e=>{const i=document.createElement("span");i.textContent=e,t.appendChild(i)}))}))}window.addEventListener("scroll",(function(){const t=window.scrollY;document.body.style.backgroundPosition=`center ${t/-20}px`})),window.addEventListener("scroll",(()=>{const o=window.pageYOffset||document.documentElement.scrollTop;o>a&&o>50?(t.classList.add("fade-out"),e.classList.add("fade-out"),i.classList.add("fade-out"),s.classList.add("visible")):(t.classList.remove("fade-out"),e.classList.remove("fade-out"),i.classList.remove("fade-out"),s.classList.remove("visible")),a=o<=0?0:o})),s.addEventListener("click",(()=>{t.classList.remove("fade-out"),e.classList.remove("fade-out"),i.classList.remove("fade-out"),s.classList.remove("visible")})),o(".title"),o(".button"),document.querySelectorAll(".button").forEach((t=>{t.addEventListener("click",n)}));const c=document.querySelector(".service");function n(){const t=gsap.timeline();t.set(".button",{visibility:"hidden",opacity:0});const e=document.querySelectorAll(".title span");t.fromTo(e,{opacity:0,bottom:"-80px"},{opacity:1,bottom:"0px",ease:"back.out(1.7)",stagger:.05}),t.fromTo(".is-slide-up",{opacity:0,y:60},{opacity:1,y:0,duration:1,ease:"power2.out"},"<"),t.to(".button",{visibility:"visible",opacity:1,duration:.2})}new IntersectionObserver(((t,e)=>{t.forEach((t=>{t.isIntersecting&&(console.log("SERVICEセクションが表示されました"),n(),e.unobserve(t.target))}))}),{threshold:.5}).observe(c)}console.log("読み込み開始"),window.addEventListener("load",(()=>{setTimeout((()=>{runMainScripts()}),5e3)}));class Curve{constructor(t){this.callback=t;let e="";"aniuma".split("").forEach((t=>{e+=`<span class="char">${t}</span>`})),document.querySelector(".js-split-text").innerHTML=e,gsap.set(".char",{opacity:0,y:50}),this.obj=document.querySelector("#js-loader"),this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvasSize={width:innerWidth,height:innerHeight},this.canvas.width=this.canvasSize.width*Math.min(2,devicePixelRatio),this.canvas.height=this.canvasSize.height*Math.min(2,devicePixelRatio),this.canvas.style.width=`${this.canvasSize.width}px`,this.canvas.style.height=`${this.canvasSize.height}px`,this.obj.appendChild(this.canvas),this.point={currentY:5*this.canvas.height,curveY:this.canvas.height},this.init()}init(){gsap.registerEffect({name:"curve",defaults:{flag:!0,delay:0},effect:(t,e)=>gsap.timeline({onUpdate:()=>{this.curveUpdate(e.flag)}}).to(t,{duration:.8,curveY:0,ease:"power4.out",delay:e.delay}).to(t,{currentY:0,duration:.8},"<")});gsap.timeline({delay:.5}).add(gsap.effects.curve(this.point)).add(this.textAnimation.bind(this)).set(this.point,{currentY:5*this.canvas.height,curveY:this.canvas.height}).set(".is-slide-up",{opacity:0,y:60}).add(gsap.effects.curve(this.point,{flag:!1}),"+=2").from(".main-visual img",{autoAlpha:0,yPercent:20,duration:1,ease:"power4.out"},"-=0.3").add(this.slideUpText.bind(this),"<").add((()=>{console.log("アニメーション終了。runMainScriptsを実行します"),this.callback&&this.callback()}));this.setupScrollEvents(),this.hideSplitText()}textAnimation(){return gsap.timeline().to(".char",{opacity:1,y:0,duration:1,ease:"back.out(3)",stagger:{each:.02}},"-=0.2").to(".char",{opacity:0,y:-100,duration:.6,ease:"back.in(2)",stagger:{each:.01,ease:"power2"}},"-=0.5")}curveUpdate(t){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle="#87CEFA",t&&(this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle="#ffffff"),this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(0,this.point.currentY),this.ctx.quadraticCurveTo(this.point.currentY,this.point.curveY/2,this.canvas.width,-this.canvas.height/10),this.ctx.lineTo(this.canvas.width,0),this.ctx.closePath(),this.ctx.fill()}}addEventListener("load",(t=>{new Curve(runMainScripts)}));