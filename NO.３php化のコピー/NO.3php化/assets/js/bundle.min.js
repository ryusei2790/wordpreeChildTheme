console.log("読み込み開始"),function(){let e=!1;window.runMainScripts=function(){if(e)return;e=!0,window.gsap||console.warn("[runMainScripts] GSAP が未読込です。アニメはスキップします。"),console.log("自作アニメーション開始");const t=document.querySelector(".header__foot--nav_head"),o=document.querySelector(".header__foot--nav_body"),n=document.querySelector(".header__foot--nav_foot"),i=document.querySelector(".close-btn"),r=document.querySelector(".service");!window.gsap||gsap.effects&&gsap.effects.floatUp||gsap.registerEffect({name:"floatUp",defaults:{y:24,duration:.9,ease:"power3.out",stagger:.06,delay:0,opacity:0},effect:(e,t)=>(gsap.set(e,{opacity:t.opacity,y:t.y,willChange:"transform,opacity"}),gsap.to(e,{y:0,opacity:1,duration:t.duration,ease:t.ease,stagger:{each:t.stagger},delay:t.delay,clearProps:"willChange"}))});let a=!1;window.addEventListener("scroll",(function(){a||(a=!0,requestAnimationFrame((()=>{const e=window.scrollY||window.pageYOffset||0;document.body.style.backgroundPosition=`center ${e/-20}px`,a=!1})))}),{passive:!0});let s=0;function c(e){document.querySelectorAll(e).forEach((e=>{const t=e.textContent||"";e.innerHTML="";for(const o of t){const t=document.createElement("span");t.textContent=o,e.appendChild(t)}}))}function l(){if(!window.gsap)return;const e=gsap.timeline();e.set(".button",{visibility:"hidden",opacity:0});const t=document.querySelectorAll(".title span");e.fromTo(t,{opacity:0,bottom:"-80px"},{opacity:1,bottom:"0px",ease:"back.out(1.7)",stagger:.05}),gsap.effects&&gsap.effects.floatUp?e.add(gsap.effects.floatUp(".is-slide-up",{y:40,duration:1,ease:"power3.out",stagger:.06}),"<"):e.fromTo(".is-slide-up",{opacity:0,y:60},{opacity:1,y:0,duration:1,ease:"power2.out"},"<"),e.to(".button",{visibility:"visible",opacity:1,duration:.2})}if(window.addEventListener("scroll",(()=>{const e=window.pageYOffset||document.documentElement.scrollTop||0,r=e>s&&e>50,a=(e,t)=>e&&e.classList[t?"add":"remove"]("fade-out");a(t,r),a(o,r),a(n,r),i&&i.classList[r?"add":"remove"]("visible"),s=e<=0?0:e}),{passive:!0}),i&&i.addEventListener("click",(()=>{[t,o,n].forEach((e=>e&&e.classList.remove("fade-out"))),i.classList.remove("visible")})),c(".title"),c(".button"),document.querySelectorAll(".button").forEach((e=>{e.addEventListener("click",l)})),r){new IntersectionObserver(((e,t)=>{e.forEach((e=>{e.isIntersecting&&(console.log("SERVICEセクションが表示されました"),l(),t.unobserve(e.target))}))}),{threshold:.5}).observe(r)}!function(e,{threshold:t=.2,rootMargin:o="0px 0px -10% 0px",once:n=!0,y:i=24,duration:r=.9,ease:a="power3.out",stagger:s=.06,delay:c=0}={}){if(!window.gsap)return;const l=document.querySelectorAll(e);if(!l.length)return;gsap.set(l,{opacity:0,y:i});const d=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(gsap.effects.floatUp(e.target,{y:i,duration:r,ease:a,stagger:0,delay:c}),n&&d.unobserve(e.target))}))}),{threshold:t,rootMargin:o});l.forEach((e=>d.observe(e)))}(".is-float-up",{y:24,duration:.9,ease:"power3.out",stagger:.06,threshold:.2,rootMargin:"0px 0px -10% 0px",once:!0})}}(),window.runIntroCurve=function(e={}){const{canvasParent:t="#js-loader",textSelector:o=".js-split-text",text:n,delay:i=.5,bg:r="#87CEFA",fg:a="#ffffff",onComplete:s}=e,c=document.querySelector(t),l=document.querySelector(o);if(!c||!l)return Promise.resolve();if(!window.gsap)return console.warn("[runIntroCurve] GSAP未読込"),Promise.resolve();const d=l.innerHTML,u=("string"==typeof n&&n.length?n:l.dataset.text||l.textContent||"").trim();u&&(l.innerHTML=u.split("").map((e=>`<span class="char" style="display:inline-block;will-change:transform,opacity">${e}</span>`)).join(""));const p=document.createElement("canvas"),f=p.getContext("2d"),g=Math.min(2,window.devicePixelRatio||1),w=window.innerWidth,h=window.innerHeight;p.width=w*g,p.height=h*g,p.style.width=w+"px",p.style.height=h+"px",Object.assign(p.style,{position:"fixed",inset:0,zIndex:9999,pointerEvents:"none"}),c.appendChild(p);const y={currentY:5*p.height,curveY:p.height};function m(e){f.clearRect(0,0,p.width,p.height),f.fillStyle=r,e&&(f.fillRect(0,0,p.width,p.height),f.fillStyle=a),f.beginPath(),f.moveTo(0,0),f.lineTo(0,y.currentY),f.quadraticCurveTo(y.currentY,y.curveY/2,p.width,-p.height/10),f.lineTo(p.width,0),f.closePath(),f.fill()}function v(){const e=Math.min(2,window.devicePixelRatio||1),t=window.innerWidth,o=window.innerHeight;p.width=t*e,p.height=o*e,p.style.width=t+"px",p.style.height=o+"px",y.currentY=5*p.height,y.curveY=p.height,m(!0)}return gsap.registerEffect({name:"curveOnce",defaults:{flag:!0,delay:0},effect:(e,t)=>gsap.timeline({onUpdate:()=>m(t.flag)}).to(y,{duration:.8,curveY:0,ease:"power4.out",delay:t.delay}).to(y,{duration:.8,currentY:0},"<")}),window.addEventListener("resize",v,{passive:!0}),new Promise((e=>{gsap.timeline({delay:i}).add(gsap.effects.curveOnce(y)).add("reveal").add((()=>{const e=document.querySelector("main");e&&(gsap.set(e,{autoAlpha:0,y:20,willChange:"transform,opacity"}),gsap.to(e,{autoAlpha:1,y:0,duration:1.3,ease:"power2.out",onComplete:()=>gsap.set(e,{clearProps:"willChange"})}))}),"reveal+=0.05").to(p,{opacity:0,duration:1.1,ease:"power2.out"},"reveal").add((()=>{if(window.removeEventListener("resize",v),p.remove(),l.innerHTML=d,"function"==typeof s)try{s()}catch(e){console.error(e)}e()}))}))},window.addEventListener("load",(()=>{window.runIntroCurve({onComplete:()=>window.runMainScripts&&window.runMainScripts()})}));